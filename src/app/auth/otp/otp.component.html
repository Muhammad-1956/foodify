<div class="container d-flex justify-content-center">
  <div class="content w-75 mt-5 border border-1 shadow rounded p-2 p-md-5">
    <div class="top-curve d-flex align-items-end pb-3 px-4">
      <h3 class="text-white">Enter OTP</h3>
    </div>

    <div class="container mt-4">
      <p class="text-center fw-semibold">
        Please Enter the OTP to your phone number :
      </p>
      <p class="text-center fw-bold">+20 1XXXXXXXXX</p>

      <form
        class="mt-3 text-center d-flex flex-column justify-content-center align-content-center"
        [formGroup]="form"
        (ngSubmit)="onSubmit()"
      >
        <div class="d-flex justify-content-center gap-3 mb-4">
  <input
    type="text"
    maxlength="1"
    class="form-control otp-box"
    formControlName="d1"
    placeholder="-"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="allowOnlyNumbers($event)"
    (focus)="onFocus($event)"
    (blur)="onBlur($event)"
    (input)="moveFocus($event, 'd2')"
    (keydown)="handleBackspace($event, null)"
  />

  <input
    type="text"
    maxlength="1"
    class="form-control otp-box"
    formControlName="d2"
    placeholder="-"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="allowOnlyNumbers($event)"
    (focus)="onFocus($event)"
    (blur)="onBlur($event)"
    (input)="moveFocus($event, 'd3')"
    (keydown)="handleBackspace($event, 'd1')"
  />

  <input
    type="text"
    maxlength="1"
    class="form-control otp-box"
    formControlName="d3"
    placeholder="-"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="allowOnlyNumbers($event)"
    (focus)="onFocus($event)"
    (blur)="onBlur($event)"
    (input)="moveFocus($event, 'd4')"
    (keydown)="handleBackspace($event, 'd2')"
  />

  <input
    type="text"
    maxlength="1"
    class="form-control otp-box"
    formControlName="d4"
    placeholder="-"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="allowOnlyNumbers($event)"
    (focus)="onFocus($event)"
    (blur)="onBlur($event)"
    (keydown)="handleBackspace($event, 'd3')"
  />
</div>


        @if(isWrong() && !isTimeOut()){
        <p class="p-2 text-warning">Wrong OTP, Please insert the correct one...</p>
        }

        <div class="d-grid w-50 mx-auto">
          <button
            [disabled]="form.invalid"
            [class.bg-secondary]="form.invalid"
            class="btn text-white"
            style="background: #0b5c2f"
          >
            Verify Code
          </button>
        </div>

        @if(!isTimeOut()){
        <p class="text-center mt-3">
          Did not get the code? <span>Resend the code in </span>
          <span class="text-danger">{{ counter() }}</span>
        </p>
        }@else{
        <p
          class="text-center mt-3 d-flex justify-content-center align-items-center"
        >
          Time out.
          <span class="text-danger btn border-0">Resend OTP</span>
        </p>
        }
      </form>
    </div>
  </div>
</div>
